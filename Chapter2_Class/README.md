# Class  
판다스의 주요 클래스인 시리즈와 데이터 프레임의 인스턴스를 생성하고 슬라이싱, 검색, 인덱서등을 알아본다.  

## 1. 시리즈와 데이터 프레임 구조  

* 시리즈  
보통 배열(array)은 인덱스(index)와 값(values)을 갖는 구조로 만들어진다. 판다스의 시리즈도 배열을 나타내지만 일반적인 배열과 차이점이 있다.  

시리즈는 보통의 배열과 달리 인덱스에 추가적인 이름인 레이블을 붙여 사용할 수 있는 구조이다. 문자열이나 날짜 등을 레이블로 붙여서 사용할 수 있으므로 특정 이름으로 검색이 가능하다.  

일반적인 파이썬 리스트보다 딕셔너리 자료형과 비슷한 구조이다. 하지만 딕셔너리와 다른 점은 시리즈를 구성하는 모든 값이 단일 자료형으로 처리된다는 것이다.  

* 시리즈 구성  
시리즈는 판다스 모듈에서 제공되는 1차원 배열이면서 판다스 모듈에 있는 데이터 프레임 등 다차원 배열의 원소로 구성되는 기본적인 클래스이다.  

시리즈에 있는 인덱스 즉, 행에 대한 레이블이 왜 관리되는지를 알아보고 이 기준을 확장한 데이터 프레임 내의 열에 대한 레이블을 차례로 알아본다.  

1차원 배열로 구성되면 데이터에 접근할 때 레이블이 붙은 인덱스로 내부의 값들에 접근하는데 이 레이블의 정의 뀨칙을 보면 숫자 형태가 기본이고 문자열, 날짜 등 다양한 구성을 할 수 있다. 단, 인덱스를 부여할 때는 매번 순서를 정하거나 일련의 정보를 갖도록 구성할 필요는 없어 필요한 정보를 임의로 지정해도 처리가 가능하다.

데이터와 인덱스로 구성된 시리즈가 생성되면 시리즈는 파이썬 리스트나 딕셔너리로 시리즈를 생성할 수 있다.  

<img width="888" alt="1" src="https://user-images.githubusercontent.com/43739827/73742430-c5a45c80-478f-11ea-9ad3-d94ddf767525.png"></img>  

시리즈 클래스의 생성자를 이용해 하나의 객체를 만들려면 생성자 내의 매개변수 data, index, name을 넣어 실행한다. 일단 data가 첫 번째 인자인데 파이썬 리스트로 4개의 원소를 가지고, index에서 리스트로 4개의 문자열의 원소를 넣었다. 시리즈를 생성할 때 index를 지정했기 때문에 실제 결과 값을 확인하면 이 문자열로 행의 레이블을 처리한다.  

마지막 인자인 name에서 이름을 넣어서 실생하면 data, index, name에 지정된 인자들이 시리즈 안에 객체의 속성으로 들어간다.  

<img width="883" alt="2" src="https://user-images.githubusercontent.com/43739827/73742693-5418de00-4790-11ea-9ecd-fd5fcc31317c.png"></img>

시리즈 객체의 name 속성을 확인하면 전달된 인자가 그대로 들어가 있는 것을 볼 수 있다. 이 객체의 원소들이 하나의 자료형을 유지하므로 dtype 속성을 확인해보면 int64 정수 자료형이라는 것을 볼 수 있다. 현재 자료형에 대한 정보를 dtype 매개변수(parameter variable)에 넘기지 않았지만 생성할 때 실제 data로 전달을 받은 원소들을 보고 자료형을 추론해 결정한다.  

<img width="877" alt="3" src="https://user-images.githubusercontent.com/43739827/73742954-ddc8ab80-4790-11ea-8c27-2902b70ad456.png"></img>  

다른 배열과 달리 다양한 속성이 있고 시리즈가 배열이므로 차원 정보나 차원의 생긴 모양등도 관리가 필요하다. 이 속성에는 .shape와 .ndim이 있고 조회하면 1차원이다. 원소의 개수는 튜플인 (4,)이므로 한 개이기 때문에 차원은 1로 표시된다.  

시리즈도 실제 확장이 가능하므로 크기와 확장 정보인 .size와 .strides 속성이 있다. 원소의 개수는 .size를 보고 확인이 가능하다. 이 배열의 지속적인 확장 기준인 .strides 속성안의 정보를 가지고 시리즈가 추가될 때마다 확장이 된다.  

<img width="876" alt="4" src="https://user-images.githubusercontent.com/43739827/73743946-0d78b300-4793-11ea-81e5-b76900315b5e.png"></img>  

시리즈에 레이블 정보를 관리하는 .index 속성을 조회하면 별도의 index 객체가 들어있는 것을 알 수 있다. 이 객체 안의 원소 값은 파이썬의 자료형인 문자열로 구성되어 판다스의 자료형인 object로 표시한다.

* 데이터 프레임  
배열 중에 2차원인 경우는 열이나 행 중씸으로 원소를 관리한다. 1차원인 시리즈를 가지고 2차원 배열인 데이터 프레임을 관리한다. 데이터 프레임의 구성은 열을 기반으로 관리하므로 1차원 배열인 시리즈가 열 단위로 저장된다.  

시리즈와 데이터 프레임의 차이점은 일차적으로 차원이 확대되었고 각 차원에 대한 원소가 시리즈로 들어온다는 것이다.  

데이터 프레임의 구조와 가장 비슷한 것은 파이썬의 자료형인 딕셔너리다. 딕셔너리의 첫 번째 키는 열이 이름으로 들어가고 실제 깞은 내부의 딕셔너리 값이 들어간다.  

* 데이터 프레임 구성  
데이터 프레임은 두 개의 인덱스(.index, .columns)로 들어간다. 생성할 때 들어가는 데이터는 .values 속성에 들어가서 인덱스를 이용해 조회하는 구조이다.  

데이터 프레임은 행과 열에 이에대한 레이블이 있고 내부의 데이터는 시리즈를 통해 행과 열로 구조화되어 있다.  

기본적으로 파이썬 리스트나 딕셔너리를 이용해 데이터를 넣어 생성할 수 있다.  

<img width="886" alt="5" src="https://user-images.githubusercontent.com/43739827/73744352-f8e8ea80-4793-11ea-8909-4f1e8bb471a7.png"></img>  

데이터 프레임도 data, index, columns 매개변수에 값을 넣어서 생성이 가능하다. 먼저 2차원 리스트를 data에 넣고 index, columns에 행(.row)과 열(.columns) 레이블을 할당해 생성한다.  

생성한 후에 변수 df에 할당된 것을 조회하면 행과 열의 레이블과 값들이 매핑된 것을 출력한다.

<img width="887" alt="6" src="https://user-images.githubusercontent.com/43739827/73744529-52511980-4794-11ea-8ec3-039866c1587d.png"></img>  

데이터 프레임의 모양(.shape), 차원(.ndim), 사이즈(.size) 속성을 확인해 원소의 구성을 확인할 수 있다.  

<img width="887" alt="7" src="https://user-images.githubusercontent.com/43739827/73744656-96dcb500-4794-11ea-91f0-fda8d0b7d71b.png"></img>  

데이터 프레임은 2차원 레이블의 속성인 행(.index)과 열(.columns) 속성을 확인하면 index 클래스의 객체로 저장된다. index 클래스를 별도로 제공해서 인덱스 레이블을 관리한다.  

<img width="892" alt="8" src="https://user-images.githubusercontent.com/43739827/73744783-dd321400-4794-11ea-942d-c9a5b7cf6587.png"></img>  

데이터 프레임의 객체를 생성한 후에 종합적인 정보를 확인하려면 .info 메소드로 내부 정보를 확인한다. 각 열에 저장된 정보와 전체 메모리에 대한 정보(memory usage)도 표시되는 것을 볼 수 있다.  

* 시리즈와 데이터 프레임 내부 멤버 확인하기  
판다스의 시리즈와 데이터 프레임 클래스들에는 다양한 속성과 메소드가 있다.  

파이썬에 있는 dir 함수는 시리즈와 데이터 프레임 클래스의 멤버들을 볼 수 있다. 이를 이용해서 내부 멤버를 확인한다.  

파이썬 comprehension에 시리즈와 데이터 프레임 클래스에 있는 스페셜 속성이나 보호 속성을 제외한 멤버들만 추출하여 set클래스로 비교할 수 있는 객체를 생성한다.  

<img width="886" alt="9" src="https://user-images.githubusercontent.com/43739827/73745585-bbd22780-4796-11ea-991d-d8d136cb36cf.png"></img>  

시리즈를 기준으로 데이터 프레임과 공통된 껏을 뺀 시리즈만 있는 것을 추출한다.  

추출할 때 집합 연산의 차집합(-) 연산을 통해 새로운 부분집합을 만들어 내부의 문자열을 출력하면 시리즈에만 있는 멤버들을 출력할 수 있다.  

<img width="883" alt="10" src="https://user-images.githubusercontent.com/43739827/73745747-11a6cf80-4797-11ea-9f16-3f6c96257a2b.png"></img>  

데이터 프레임에 있는 내용을 차집합 연산을 통해 문자열 형태로 출력한다.  

<img width="890" alt="11" src="https://user-images.githubusercontent.com/43739827/73745843-49157c00-4797-11ea-8fb9-92faf3249637.png"></img>  

시리즈와 데이터 프레임 클래스에 공통으로 있는 것은 교집합(&) 연산을 통해 부분집합을 만들어서 출력하면 시리즈와 데이터 프레임이 공통으로 가지는 멤버들이 출력된다.  

<img width="890" alt="12" src="https://user-images.githubusercontent.com/43739827/73746235-13bd5e00-4798-11ea-8864-430b847a628b.png"></img>  

<img width="907" alt="13" src="https://user-images.githubusercontent.com/43739827/73746259-1fa92000-4798-11ea-9863-50cfbd786f70.png"></img>  


* 파일에 저장된 멤버 정보 읽고 확인하기  

판다스에서 제공하는 .read_csv 함수를 통해 csv 파일을 읽으면 csv 파일이 기본 2차원 데이터이기 때문에 데이터 프레임으로 변환된다. 이때 각 열에 대한 정보를 usecols 매개변수를 이용해서 처리한다.  

또한 파일이 저장된 텍스트를 utf-8을 기준으로 변환해야 encoding 매개변수에 변환 기준인 euc-kr로 인코딩한다.  

저장된 df_f 변수에 데이터 프레임이 할당되어 있으므로 점 연산자를 통해서 .head 메소드로 내부의 값을 조회한다.  

<img width="889" alt="14" src="https://user-images.githubusercontent.com/43739827/73746802-63505980-4799-11ea-820e-ae9dc0ea95d5.png"></img>  

이 데이터 프레임의 행과 열에 대한 정보에서 모양(.shape) 속성을 확인하면 행은 19개이고 열은 2개인 것을 알 수 있다.  

<img width="888" alt="15" src="https://user-images.githubusercontent.com/43739827/73746888-9a266f80-4799-11ea-8d87-bd9c4b554657.png"></img>  

데이터 프레임에서 하나의 열을 조회하려면 인덱싱 연산자([])를 이용해 열의 이름을 문자열로 넣어서 조회한다. 한 차원으로 축소된 열이 조회되어 이것을 시리즈로 보여준다. 이를 .head 메소드로 조회하면 상위 5개에 대한 정보를 확인할 수 있다.  

<img width="890" alt="16" src="https://user-images.githubusercontent.com/43739827/73747078-f5f0f880-4799-11ea-90ef-8a3955ec7903.png"></img>  

두 열을 인덱싱 연산자를 통해 읽어와서 비교 연산자를 실행하면 같은 이름은 True로 표시하고, 같지 않은 이름은  False로 표시하므로 공통된 것은 .sum 메소드로 계산하면 건수를 구할 수 있다. 일단 비교 연산자의 처리된 결과가 새로운 시리즈로 나오고 그 내부의 값이 True나 False로 처리되는 것을 볼 수 있다.  

<img width="887" alt="17" src="https://user-images.githubusercontent.com/43739827/73747301-829bb680-479a-11ea-96d1-61a85189e7a3.png"></img>
